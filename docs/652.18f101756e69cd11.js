"use strict";(self.webpackChunkarwiki=self.webpackChunkarwiki||[]).push([[652],{69652:($e,S,g)=>{g.r(S),g.d(S,{UserProfileModule:()=>Ve});var Z=g(36895),V=g(37101),k=g(89299),A=g(15861),f=g(50727),$=g(97084),t=g(94650),U=g(32511),D=g(17009),N=g(75501),z=g(65938),Q=g(69817),v=g(4859),W=g(97392),M=g(51572),O=g(3848),I=g(97134),Y=g(51614),R=g(32076),B=g(39646),C=g(63900),y=g(38952),l=g(30671),L=g(68853),J=g(73162);function X(n,a){1&n&&t._UZ(0,"mat-progress-bar",4)}function E(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Img "),t.qZA())}function K(n,a){if(1&n&&t._UZ(0,"img",20),2&n){const e=t.oxw().$implicit;t.Q6J("src",e.img,t.LSH)}}function G(n,a){if(1&n&&(t.TgZ(0,"td",18),t.YNc(1,K,1,1,"img",19),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.img)}}function j(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Slug "),t.qZA())}const F=function(n,a){return["/",n,a]};function tt(n,a){if(1&n&&(t.TgZ(0,"td",21)(1,"a",22),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(2,F,e.language,e.slug)),t.xp6(1),t.Oqu(e.slug)}}function et(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Title "),t.qZA())}function nt(n,a){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function it(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Category "),t.qZA())}function at(n,a){if(1&n&&(t.TgZ(0,"td",21)(1,"a",23),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(1),t.hYB("href","./#/",e.language,"/category/",e.category,"",t.LSH),t.xp6(1),t.Oqu(e.category)}}function ot(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Tx "),t.qZA())}function st(n,a){if(1&n&&(t.TgZ(0,"td",21)(1,"a",24),t._uU(2),t.qZA(),t._UZ(3,"br")(4,"app-arweave-address",25),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.MGl("href","https://viewblock.io/arweave/block/",e.block.height,"",t.LSH),t.xp6(1),t.hij("Block: ",e.block.height," "),t.xp6(2),t.Q6J("address",e.id)("isAddress",!1)}}function rt(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Approved at"),t.qZA())}function lt(n,a){if(1&n&&(t.TgZ(0,"td",21)(1,"a",24),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(1),t.MGl("href","https://viewblock.io/arweave/block/",e.start,"",t.LSH),t.xp6(1),t.hij("Block: ",e.start," ")}}function ct(n,a){1&n&&t._UZ(0,"tr",26)}function dt(n,a){1&n&&t._UZ(0,"tr",27)}function gt(n,a){if(1&n&&(t.TgZ(0,"table",5),t.ynx(1,6),t.YNc(2,E,2,0,"th",7),t.YNc(3,G,2,1,"td",8),t.BQk(),t.ynx(4,9),t.YNc(5,j,2,0,"th",7),t.YNc(6,tt,3,5,"td",10),t.BQk(),t.ynx(7,11),t.YNc(8,et,2,0,"th",7),t.YNc(9,nt,2,1,"td",10),t.BQk(),t.ynx(10,12),t.YNc(11,it,2,0,"th",7),t.YNc(12,at,3,3,"td",10),t.BQk(),t.ynx(13,13),t.YNc(14,ot,2,0,"th",7),t.YNc(15,st,5,4,"td",10),t.BQk(),t.ynx(16,14),t.YNc(17,rt,2,0,"th",7),t.YNc(18,lt,3,2,"td",10),t.BQk(),t.YNc(19,ct,1,0,"tr",15),t.YNc(20,dt,1,0,"tr",16),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.pages),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function pt(n,a){1&n&&t._UZ(0,"mat-spinner",32)}function mt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadMoreResults())}),t.YNc(1,pt,1,0,"mat-spinner",31),t._uU(2," Load more results "),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.loadingMore),t.xp6(1),t.Q6J("ngIf",e.loadingMore)}}function ut(n,a){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,mt,3,2,"button",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.eof)}}function _t(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1," No results found.\n"),t.qZA())}let ht=(()=>{class n{constructor(e,i,o,s,r){this._snackBar=e,this._arweave=i,this._auth=o,this._userSettings=s,this._arwikiTokenContract=r,this.address="",this.routeLang="",this._arwikiQuery=null,this.loading=!1,this.pages=[],this.myPagesSubscription=f.w0.EMPTY,this.myPagesNextSubscription=f.w0.EMPTY,this.baseURL=this._arweave.baseURL,this.lockButtons=!1,this.displayedColumns=["img","title","slug","category","id","start"],this.loadingMore=!1,this.table=null,this.eof=!1}ngOnInit(){this._arwikiQuery=new Y.x(this._arweave.arweave),this.getMyArWikiPages()}getMyArWikiPages(){let e=[];this.pages=[],this.loading=!0,this.myPagesSubscription=(0,R.D)(this.getCurrentHeight()).pipe((0,C.w)(o=>this._arwikiQuery.getMyArWikiPages(this.address,this.routeLang,100,o,!0)),(0,C.w)(o=>(e=o,this._arwikiTokenContract.getApprovedPages(this.routeLang,-1)))).subscribe({next:o=>{const s=[];for(let r of e){const c=new y.default(r,this._arweave.arweave),d=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Title"),m=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Slug"),_=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Category"),w=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Lang"),h=this.sanitizeImg(this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Img")),b=c.owner.address,x=c.id,u=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Value"),p=o[m]&&o[m].content==x?o[m]:{},T=p.start?p.start:0,P=p.pageRewardAt?p.pageRewardAt:0,q=p.sponsor?p.sponsor:"";!T||s.push({title:d,slug:m,category:_,img:h,owner:b,language:w,id:x,value:u,block:c.block,start:T,pageRewardAt:P,sponsor:q})}this.pages=s,this.loading=!1},error:o=>{this.message(o,"error"),this.loading=!1}})}ngOnDestroy(){this.myPagesSubscription.unsubscribe(),this.myPagesNextSubscription.unsubscribe()}sanitizeImg(e){return e.indexOf("http")>=0?e:e?`${this.baseURL}${e}`:""}message(e,i="",o){this._snackBar.open(e,"X",{duration:4e3,horizontalPosition:"center",verticalPosition:o,panelClass:i})}timestampToDate(e){return new Date(1e3*e)}getCurrentHeight(){var e=this;return(0,A.Z)(function*(){let i={},o=0;try{i=yield e._arweave.arweave.network.getInfo(),o=i.height?i.height:0}catch(s){throw Error(`${s}`)}return o})()}loadMoreResults(){let e=[];this.loadingMore=!0,this.myPagesNextSubscription=this._arwikiQuery.next().pipe((0,C.w)(i=>{e=i;const o=[];for(let s of i)o.push(s.id);return 0===o.length?(this.eof=!0,(0,B.of)({})):this._arwikiTokenContract.getApprovedPages(this.routeLang,-1)})).subscribe({next:i=>{for(let s of e){const r=new y.default(s,this._arweave.arweave),c=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Title"),d=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Slug"),m=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Category"),_=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Lang"),w=this.sanitizeImg(this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Img")),h=r.owner.address,b=r.id,x=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Value"),u=i[d]&&i[d].content==b?i[d]:{},p=u.start?u.start:0,T=u.pageRewardAt?u.pageRewardAt:0,P=u.sponsor?u.sponsor:"";!p||this.pages.push({title:c,slug:d,category:m,img:w,owner:h,language:_,id:b,value:x,block:r.block,start:p,pageRewardAt:T,sponsor:P})}this.loadingMore=!1,this.table.renderRows()},error:i=>{this.message(i,"error"),this.loadingMore=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.ux),t.Y36(L.N),t.Y36(U.e),t.Y36(Q.s),t.Y36(N.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-published-pages"]],viewQuery:function(e,i){if(1&e&&t.Gf(l.BZ,5),2&e){let o;t.iGM(o=t.CRH())&&(i.table=o.first)}},inputs:{address:"address",routeLang:["lang","routeLang"]},decls:6,vars:4,consts:[["mode","indeterminate","class","loader","color","primary",4,"ngIf"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["class","text-right",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","color","primary",1,"loader"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","img"],["mat-header-cell","",4,"matHeaderCellDef"],["style","padding: 6px;","mat-cell","",4,"matCellDef"],["matColumnDef","slug"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","category"],["matColumnDef","id"],["matColumnDef","start"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",2,"padding","6px"],["width","100px",3,"src",4,"ngIf"],["width","100px",3,"src"],["mat-cell",""],["mat-button","",3,"routerLink"],["mat-button","",3,"href"],["target","_blank","mat-button","",3,"href"],[3,"address","isAddress"],["mat-header-row",""],["mat-row",""],[1,"text-right"],["mat-button","",3,"disabled","click",4,"ngIf"],["mat-button","",3,"disabled","click"],["diameter","22","mode","indeterminate","class","spinner-icon","color","primary",4,"ngIf"],["diameter","22","mode","indeterminate","color","primary",1,"spinner-icon"]],template:function(e,i){1&e&&(t.YNc(0,X,1,0,"mat-progress-bar",0),t.TgZ(1,"h2"),t._uU(2,"Published Pages"),t.qZA(),t.YNc(3,gt,21,3,"table",1),t.YNc(4,ut,2,1,"div",2),t.YNc(5,_t,2,0,"p",3)),2&e&&(t.Q6J("ngIf",i.loading),t.xp6(3),t.Q6J("ngIf",!i.loading&&i.pages&&i.pages.length),t.xp6(1),t.Q6J("ngIf",!i.loading&&i.pages&&i.pages.length),t.xp6(1),t.Q6J("ngIf",!(i.loading||i.pages&&i.pages.length)))},dependencies:[Z.O5,k.yS,v.lW,v.zs,M.Ou,J.pW,I.N,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk],styles:["table[_ngcontent-%COMP%]{width:90%;margin:20px auto 0}.loader[_ngcontent-%COMP%]{margin:0 auto}.spinner-icon[_ngcontent-%COMP%]{float:left}"]}),n})();function ft(n,a){1&n&&t._UZ(0,"mat-progress-bar",4)}function wt(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Img "),t.qZA())}function bt(n,a){if(1&n&&t._UZ(0,"img",20),2&n){const e=t.oxw().$implicit;t.Q6J("src",e.img,t.LSH)}}function xt(n,a){if(1&n&&(t.TgZ(0,"td",18),t.YNc(1,bt,1,1,"img",19),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.img)}}function Tt(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Slug "),t.qZA())}const vt=function(n,a){return["/",n,a]};function Ct(n,a){if(1&n&&(t.TgZ(0,"td",21)(1,"a",22),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(2,vt,e.language,e.slug)),t.xp6(1),t.Oqu(e.slug)}}function yt(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Title "),t.qZA())}function Zt(n,a){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function Pt(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Category "),t.qZA())}function kt(n,a){if(1&n&&(t.TgZ(0,"td",21)(1,"a",23),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(1),t.hYB("href","./#/",e.language,"/category/",e.category,"",t.LSH),t.xp6(1),t.Oqu(e.category)}}function At(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Tx "),t.qZA())}function Ut(n,a){if(1&n&&(t.TgZ(0,"td",21)(1,"a",24),t._uU(2),t.qZA(),t._UZ(3,"br")(4,"app-arweave-address",25),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.MGl("href","https://viewblock.io/arweave/block/",e.block.height,"",t.LSH),t.xp6(1),t.hij("Block: ",e.block.height," "),t.xp6(2),t.Q6J("address",e.id)("isAddress",!1)}}function Dt(n,a){1&n&&(t.TgZ(0,"th",17),t._uU(1," Approved by"),t.qZA())}function Nt(n,a){if(1&n&&(t.TgZ(0,"td",21)(1,"a",24),t._uU(2),t.qZA(),t._UZ(3,"br")(4,"app-arweave-address",26),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(1),t.MGl("href","https://viewblock.io/arweave/block/",e.start,"",t.LSH),t.xp6(1),t.hij("Block: ",e.start," "),t.xp6(2),t.Q6J("address",i.updateApprovedBy[e.id])("showHandleInAddress",!1)("lang",i.routeLang)("lang",e.language)}}function Qt(n,a){1&n&&t._UZ(0,"tr",27)}function Mt(n,a){1&n&&t._UZ(0,"tr",28)}function It(n,a){if(1&n&&(t.TgZ(0,"table",5),t.ynx(1,6),t.YNc(2,wt,2,0,"th",7),t.YNc(3,xt,2,1,"td",8),t.BQk(),t.ynx(4,9),t.YNc(5,Tt,2,0,"th",7),t.YNc(6,Ct,3,5,"td",10),t.BQk(),t.ynx(7,11),t.YNc(8,yt,2,0,"th",7),t.YNc(9,Zt,2,1,"td",10),t.BQk(),t.ynx(10,12),t.YNc(11,Pt,2,0,"th",7),t.YNc(12,kt,3,3,"td",10),t.BQk(),t.ynx(13,13),t.YNc(14,At,2,0,"th",7),t.YNc(15,Ut,5,4,"td",10),t.BQk(),t.ynx(16,14),t.YNc(17,Dt,2,0,"th",7),t.YNc(18,Nt,5,6,"td",10),t.BQk(),t.YNc(19,Qt,1,0,"tr",15),t.YNc(20,Mt,1,0,"tr",16),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.pages),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function Yt(n,a){1&n&&t._UZ(0,"mat-spinner",33)}function Rt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadMoreResults())}),t.YNc(1,Yt,1,0,"mat-spinner",32),t._uU(2," Load more results "),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.loadingMore),t.xp6(1),t.Q6J("ngIf",e.loadingMore)}}function Lt(n,a){if(1&n&&(t.TgZ(0,"div",29),t.YNc(1,Rt,3,2,"button",30),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.eof)}}function Jt(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1," No results found.\n"),t.qZA())}let Ot=(()=>{class n{constructor(e,i,o,s,r){this._snackBar=e,this._arweave=i,this._auth=o,this._userSettings=s,this._arwikiTokenContract=r,this.address="",this._arwikiQuery=null,this.loading=!1,this.pages=[],this.myPagesSubscription=f.w0.EMPTY,this.myPagesNextSubscription=f.w0.EMPTY,this.routeLang="",this.baseURL=this._arweave.baseURL,this.lockButtons=!1,this.displayedColumns=["img","title","slug","category","id","start"],this.loadingMore=!1,this.table=null,this.eof=!1,this.updateApprovedBy={}}ngOnInit(){this._arwikiQuery=new Y.x(this._arweave.arweave)}ngOnChanges(){this.getMyArWikiUpdates()}getMyArWikiUpdates(){let e=[];this.pages=[],this.loading=!0,this.myPagesSubscription=(0,R.D)(this.getCurrentHeight()).pipe((0,C.w)(o=>this._arwikiQuery.getMyArWikiPagesUpdates(this.address,this.routeLang,100,o,!0)),(0,C.w)(o=>{e=o;const s=[];for(let r of o)s.push(r.id);return this._arwikiTokenContract.getApprovedPages(this.routeLang,-1)})).subscribe({next:o=>{const s=[];for(let r of e){const c=new y.default(r,this._arweave.arweave),d=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Title"),m=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Slug"),_=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Category"),w=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Lang"),h=this.sanitizeImg(this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Img")),b=c.owner.address,x=c.id,u=this._arwikiQuery.searchKeyNameInTags(c.tags,"Arwiki-Page-Value"),p=o[m].updates.find(q=>q.tx===x),T=p&&p.at?p.at:0,P=p&&p.approvedBy?p.approvedBy:"";!T||(this.updateApprovedBy[x]=P,s.push({title:d,slug:m,category:_,img:h,owner:b,language:w,id:x,value:u,block:c.block,start:T}))}this.pages=s,this.loading=!1},error:o=>{this.message(o,"error"),this.loading=!1}})}ngOnDestroy(){this.myPagesSubscription.unsubscribe(),this.myPagesNextSubscription.unsubscribe()}sanitizeImg(e){return e.indexOf("http")>=0?e:e?`${this.baseURL}${e}`:""}message(e,i="",o){this._snackBar.open(e,"X",{duration:4e3,horizontalPosition:"center",verticalPosition:o,panelClass:i})}timestampToDate(e){return new Date(1e3*e)}getCurrentHeight(){var e=this;return(0,A.Z)(function*(){let i={},o=0;try{i=yield e._arweave.arweave.network.getInfo(),o=i.height?i.height:0}catch(s){throw Error(`${s}`)}return o})()}loadMoreResults(){let e=[];this.loadingMore=!0,this.myPagesNextSubscription=this._arwikiQuery.next().pipe((0,C.w)(i=>(e=i,0===e.length?(this.eof=!0,(0,B.of)({})):this._arwikiTokenContract.getApprovedPages(this.routeLang,-1)))).subscribe({next:i=>{for(let s of e){const r=new y.default(s,this._arweave.arweave),c=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Title"),d=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Slug"),m=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Category"),_=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Lang"),w=this.sanitizeImg(this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Img")),h=r.owner.address,b=r.id,x=this._arwikiQuery.searchKeyNameInTags(r.tags,"Arwiki-Page-Value"),u=i[d].updates.find(P=>P.tx===b),p=u&&u.at?u.at:0,T=u&&u.approvedBy?u.approvedBy:"";!p||(this.updateApprovedBy[b]=T,this.pages.push({title:c,slug:d,category:m,img:w,owner:h,language:_,id:b,value:x,block:r.block,start:p}))}this.loadingMore=!1,this.table.renderRows()},error:i=>{this.message(i,"error"),this.loadingMore=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.ux),t.Y36(L.N),t.Y36(U.e),t.Y36(Q.s),t.Y36(N.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-posted-updates"]],viewQuery:function(e,i){if(1&e&&t.Gf(l.BZ,5),2&e){let o;t.iGM(o=t.CRH())&&(i.table=o.first)}},inputs:{address:"address",routeLang:["lang","routeLang"]},features:[t.TTD],decls:6,vars:4,consts:[["mode","indeterminate","class","loader","color","primary",4,"ngIf"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["class","text-right",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","color","primary",1,"loader"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","img"],["mat-header-cell","",4,"matHeaderCellDef"],["style","padding: 6px;","mat-cell","",4,"matCellDef"],["matColumnDef","slug"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","category"],["matColumnDef","id"],["matColumnDef","start"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",2,"padding","6px"],["width","100px",3,"src",4,"ngIf"],["width","100px",3,"src"],["mat-cell",""],["mat-button","",1,"ellipsis","word-break",3,"routerLink"],["mat-button","",3,"href"],["target","_blank","mat-button","",3,"href"],[3,"address","isAddress"],[3,"address","showHandleInAddress","lang"],["mat-header-row",""],["mat-row",""],[1,"text-right"],["mat-button","",3,"disabled","click",4,"ngIf"],["mat-button","",3,"disabled","click"],["diameter","22","mode","indeterminate","class","spinner-icon","color","primary",4,"ngIf"],["diameter","22","mode","indeterminate","color","primary",1,"spinner-icon"]],template:function(e,i){1&e&&(t.YNc(0,ft,1,0,"mat-progress-bar",0),t.TgZ(1,"h2"),t._uU(2,"Posted Updates"),t.qZA(),t.YNc(3,It,21,3,"table",1),t.YNc(4,Lt,2,1,"div",2),t.YNc(5,Jt,2,0,"p",3)),2&e&&(t.Q6J("ngIf",i.loading),t.xp6(3),t.Q6J("ngIf",!i.loading&&i.pages&&i.pages.length),t.xp6(1),t.Q6J("ngIf",!i.loading&&i.pages&&i.pages.length),t.xp6(1),t.Q6J("ngIf",!(i.loading||i.pages&&i.pages.length)))},dependencies:[Z.O5,k.yS,v.lW,v.zs,M.Ou,J.pW,I.N,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk],styles:["table[_ngcontent-%COMP%]{width:90%;margin:20px auto 0}.loader[_ngcontent-%COMP%]{margin:0 auto}.spinner-icon[_ngcontent-%COMP%]{float:left}"]}),n})();function qt(n,a){1&n&&t._UZ(0,"mat-progress-bar",4)}function St(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Recipient "),t.qZA())}function Bt(n,a){if(1&n&&(t.TgZ(0,"td",14),t._UZ(1,"app-arweave-address",15),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("address",e.to)("lang",i.routeLang)}}function Ht(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Amount "),t.qZA())}function Vt(n,a){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.amount," AR ")}}function $t(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Tx "),t.qZA())}function zt(n,a){if(1&n&&(t.TgZ(0,"td",14),t._UZ(1,"app-arweave-address",16),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("address",e.id)("isAddress",!1)}}function Wt(n,a){1&n&&t._UZ(0,"tr",17)}function Xt(n,a){1&n&&t._UZ(0,"tr",18)}function Et(n,a){if(1&n&&(t.TgZ(0,"table",5),t.ynx(1,6),t.YNc(2,St,2,0,"th",7),t.YNc(3,Bt,2,2,"td",8),t.BQk(),t.ynx(4,9),t.YNc(5,Ht,2,0,"th",7),t.YNc(6,Vt,2,1,"td",8),t.BQk(),t.ynx(7,10),t.YNc(8,$t,2,0,"th",7),t.YNc(9,zt,2,2,"td",8),t.BQk(),t.YNc(10,Wt,1,0,"tr",11),t.YNc(11,Xt,1,0,"tr",12),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.donations),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function Kt(n,a){1&n&&t._UZ(0,"mat-spinner",23)}function Gt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadMoreResults())}),t.YNc(1,Kt,1,0,"mat-spinner",22),t._uU(2," Load more results "),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.loadingMore),t.xp6(1),t.Q6J("ngIf",e.loadingMore)}}function jt(n,a){if(1&n&&(t.TgZ(0,"div",19),t.YNc(1,Gt,3,2,"button",20),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.eof)}}function Ft(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1," No results found.\n"),t.qZA())}let te=(()=>{class n{constructor(e,i,o,s,r){this._snackBar=e,this._arweave=i,this._auth=o,this._userSettings=s,this._arwikiTokenContract=r,this.address="",this.routeLang="",this._arwikiQuery=null,this.loading=!1,this.donations=[],this.donationsMadeSubscription=f.w0.EMPTY,this.donationsMadeNextSubscription=f.w0.EMPTY,this.baseURL=this._arweave.baseURL,this.lockButtons=!1,this.displayedColumns=["to","amount","id"],this.loadingMore=!1,this.table=null,this.eof=!1,this.total=0}ngOnInit(){this._arwikiQuery=new Y.x(this._arweave.arweave)}ngOnChanges(){this.getMyDonations()}getMyDonations(){this.donations=[],this.loading=!0,this.total=0,this.donationsMadeSubscription=(0,R.D)(this.getCurrentHeight()).pipe((0,C.w)(o=>this._arwikiQuery.getMyArWikiDonations(this.address,100,o,!0))).subscribe({next:o=>{const s=[];let r=0;for(let c of o){const d=new y.default(c,this._arweave.arweave),_=d.quantity&&d.quantity.ar?d.quantity.ar:"0";s.push({id:d.id,to:d.recipient?d.recipient:"",amount:_}),r+=+_}this.donations=s,this.total=r,this.loading=!1},error:o=>{this.message(o,"error"),this.loading=!1}})}ngOnDestroy(){this.donationsMadeSubscription.unsubscribe(),this.donationsMadeNextSubscription.unsubscribe()}sanitizeImg(e){return e.indexOf("http")>=0?e:e?`${this.baseURL}${e}`:""}message(e,i="",o){this._snackBar.open(e,"X",{duration:4e3,horizontalPosition:"center",verticalPosition:o,panelClass:i})}timestampToDate(e){return new Date(1e3*e)}getCurrentHeight(){var e=this;return(0,A.Z)(function*(){let i={},o=0;try{i=yield e._arweave.arweave.network.getInfo(),o=i.height?i.height:0}catch(s){throw Error(`${s}`)}return o})()}loadMoreResults(){this.loadingMore=!0,this.donationsMadeNextSubscription=this._arwikiQuery.next().subscribe({next:e=>{const i=e;0===i.length&&(this.eof=!0);for(let o of i){const s=new y.default(o,this._arweave.arweave),c=s.quantity.ar,d=s.recipient,m=s.id;this.total+=+c,this.donations.push({to:d,amount:c,id:m})}this.loadingMore=!1,this.table.renderRows()},error:e=>{this.message(e,"error"),this.loadingMore=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.ux),t.Y36(L.N),t.Y36(U.e),t.Y36(Q.s),t.Y36(N.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-donations-made"]],viewQuery:function(e,i){if(1&e&&t.Gf(l.BZ,5),2&e){let o;t.iGM(o=t.CRH())&&(i.table=o.first)}},inputs:{address:"address",routeLang:["lang","routeLang"]},features:[t.TTD],decls:8,vars:5,consts:[["mode","indeterminate","class","loader","color","primary",4,"ngIf"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["class","text-right",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","color","primary",1,"loader"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","to"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","amount"],["matColumnDef","id"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"address","lang"],[3,"address","isAddress"],["mat-header-row",""],["mat-row",""],[1,"text-right"],["mat-button","",3,"disabled","click",4,"ngIf"],["mat-button","",3,"disabled","click"],["diameter","22","mode","indeterminate","class","spinner-icon","color","primary",4,"ngIf"],["diameter","22","mode","indeterminate","color","primary",1,"spinner-icon"]],template:function(e,i){1&e&&(t.YNc(0,qt,1,0,"mat-progress-bar",0),t.TgZ(1,"h2"),t._uU(2,"Donations Made"),t.qZA(),t.TgZ(3,"h3"),t._uU(4),t.qZA(),t.YNc(5,Et,12,3,"table",1),t.YNc(6,jt,2,1,"div",2),t.YNc(7,Ft,2,0,"p",3)),2&e&&(t.Q6J("ngIf",i.loading),t.xp6(4),t.hij("Total: ",i.total," AR"),t.xp6(1),t.Q6J("ngIf",!i.loading&&i.donations&&i.donations.length),t.xp6(1),t.Q6J("ngIf",!i.loading&&i.donations&&i.donations.length),t.xp6(1),t.Q6J("ngIf",!(i.loading||i.donations&&i.donations.length)))},dependencies:[Z.O5,v.lW,M.Ou,J.pW,I.N,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk],styles:["table[_ngcontent-%COMP%]{width:90%;margin:20px auto 0}.loader[_ngcontent-%COMP%]{margin:0 auto}.spinner-icon[_ngcontent-%COMP%]{float:left}"]}),n})();function ee(n,a){1&n&&t._UZ(0,"mat-progress-bar",4)}function ne(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," From "),t.qZA())}function ie(n,a){if(1&n&&(t.TgZ(0,"td",14),t._UZ(1,"app-arweave-address",15),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("address",e.from)("lang",i.routeLang)}}function ae(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Amount "),t.qZA())}function oe(n,a){if(1&n&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.amount," AR ")}}function se(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1," Tx "),t.qZA())}function re(n,a){if(1&n&&(t.TgZ(0,"td",14),t._UZ(1,"app-arweave-address",16),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("address",e.id)("isAddress",!1)}}function le(n,a){1&n&&t._UZ(0,"tr",17)}function ce(n,a){1&n&&t._UZ(0,"tr",18)}function de(n,a){if(1&n&&(t.TgZ(0,"table",5),t.ynx(1,6),t.YNc(2,ne,2,0,"th",7),t.YNc(3,ie,2,2,"td",8),t.BQk(),t.ynx(4,9),t.YNc(5,ae,2,0,"th",7),t.YNc(6,oe,2,1,"td",8),t.BQk(),t.ynx(7,10),t.YNc(8,se,2,0,"th",7),t.YNc(9,re,2,2,"td",8),t.BQk(),t.YNc(10,le,1,0,"tr",11),t.YNc(11,ce,1,0,"tr",12),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.donations),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function ge(n,a){1&n&&t._UZ(0,"mat-spinner",23)}function pe(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.loadMoreResults())}),t.YNc(1,ge,1,0,"mat-spinner",22),t._uU(2," Load more results "),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.loadingMore),t.xp6(1),t.Q6J("ngIf",e.loadingMore)}}function me(n,a){if(1&n&&(t.TgZ(0,"div",19),t.YNc(1,pe,3,2,"button",20),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.eof)}}function ue(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1," No results found.\n"),t.qZA())}let _e=(()=>{class n{constructor(e,i,o,s,r){this._snackBar=e,this._arweave=i,this._auth=o,this._userSettings=s,this._arwikiTokenContract=r,this.address="",this.routeLang="",this._arwikiQuery=null,this.loading=!1,this.donations=[],this.donationsReceivedSubscription=f.w0.EMPTY,this.donationsReceivedNextSubscription=f.w0.EMPTY,this.baseURL=this._arweave.baseURL,this.lockButtons=!1,this.displayedColumns=["from","amount","id"],this.loadingMore=!1,this.table=null,this.eof=!1,this.total=0}ngOnInit(){this._arwikiQuery=new Y.x(this._arweave.arweave)}ngOnChanges(){this.getMyDonationsReceived()}getMyDonationsReceived(){this.donations=[],this.loading=!0,this.total=0,this.donationsReceivedSubscription=(0,R.D)(this.getCurrentHeight()).pipe((0,C.w)(o=>this._arwikiQuery.getMyArWikiDonationsReceived(this.address,100,o,!0))).subscribe({next:o=>{const s=[];let r=0;for(let c of o){const d=new y.default(c,this._arweave.arweave),_=d.quantity&&d.quantity.ar?d.quantity.ar:"0";r+=+_,s.push({id:d.id,from:d.owner.address,amount:_})}this.donations=s,this.total=r,this.loading=!1},error:o=>{this.message(o,"error"),this.loading=!1}})}ngOnDestroy(){this.donationsReceivedSubscription.unsubscribe(),this.donationsReceivedNextSubscription.unsubscribe()}sanitizeImg(e){return e.indexOf("http")>=0?e:e?`${this.baseURL}${e}`:""}message(e,i="",o){this._snackBar.open(e,"X",{duration:4e3,horizontalPosition:"center",verticalPosition:o,panelClass:i})}timestampToDate(e){return new Date(1e3*e)}getCurrentHeight(){var e=this;return(0,A.Z)(function*(){let i={},o=0;try{i=yield e._arweave.arweave.network.getInfo(),o=i.height?i.height:0}catch(s){throw Error(`${s}`)}return o})()}loadMoreResults(){this.loadingMore=!0,this.donationsReceivedNextSubscription=this._arwikiQuery.next().subscribe({next:e=>{const i=e;0===i.length&&(this.eof=!0);for(let o of i){const s=new y.default(o,this._arweave.arweave),r=s.owner.address,c=s.quantity.ar,m=s.id;this.total+=+c,this.donations.push({from:r,amount:c,id:m})}this.loadingMore=!1,this.table.renderRows()},error:e=>{this.message(e,"error"),this.loadingMore=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.ux),t.Y36(L.N),t.Y36(U.e),t.Y36(Q.s),t.Y36(N.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-donations-received"]],viewQuery:function(e,i){if(1&e&&t.Gf(l.BZ,5),2&e){let o;t.iGM(o=t.CRH())&&(i.table=o.first)}},inputs:{address:"address",routeLang:["lang","routeLang"]},features:[t.TTD],decls:8,vars:5,consts:[["mode","indeterminate","class","loader","color","primary",4,"ngIf"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["class","text-right",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","color","primary",1,"loader"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","from"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","amount"],["matColumnDef","id"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"address","lang"],[3,"address","isAddress"],["mat-header-row",""],["mat-row",""],[1,"text-right"],["mat-button","",3,"disabled","click",4,"ngIf"],["mat-button","",3,"disabled","click"],["diameter","22","mode","indeterminate","class","spinner-icon","color","primary",4,"ngIf"],["diameter","22","mode","indeterminate","color","primary",1,"spinner-icon"]],template:function(e,i){1&e&&(t.YNc(0,ee,1,0,"mat-progress-bar",0),t.TgZ(1,"h2"),t._uU(2,"Donations Received"),t.qZA(),t.TgZ(3,"h3"),t._uU(4),t.qZA(),t.YNc(5,de,12,3,"table",1),t.YNc(6,me,2,1,"div",2),t.YNc(7,ue,2,0,"p",3)),2&e&&(t.Q6J("ngIf",i.loading),t.xp6(4),t.hij("Total: ",i.total," AR"),t.xp6(1),t.Q6J("ngIf",!i.loading&&i.donations&&i.donations.length),t.xp6(1),t.Q6J("ngIf",!i.loading&&i.donations&&i.donations.length),t.xp6(1),t.Q6J("ngIf",!(i.loading||i.donations&&i.donations.length)))},dependencies:[Z.O5,v.lW,M.Ou,J.pW,I.N,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk],styles:["table[_ngcontent-%COMP%]{width:90%;margin:20px auto 0}.loader[_ngcontent-%COMP%]{margin:0 auto}.spinner-icon[_ngcontent-%COMP%]{float:left}"]}),n})();var he=g(13081);function fe(n,a){1&n&&(t.TgZ(0,"a",8)(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"GENERAL.BUTTONS.BTN_EDIT_PROFILE")," "))}function we(n,a){1&n&&(t.TgZ(0,"div",11),t._UZ(1,"mat-spinner",12),t.qZA())}const be=function(n,a){return["/",n,"moderators","activity-history",a]};function xe(n,a){if(1&n&&(t.TgZ(0,"div",13)(1,"strong"),t._uU(2,"Role: "),t.qZA(),t.TgZ(3,"a",14),t._uU(4,"\u2b50Moderator "),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("routerLink",t.WLB(1,be,e.routeLang,e.address))}}function Te(n,a){if(1&n&&t._UZ(0,"img",20),2&n){const e=t.oxw(3);t.Q6J("src",e.profile.avatarURL,t.LSH)}}function ve(n,a){if(1&n&&t._UZ(0,"img",20),2&n){const e=t.oxw(3);t.Q6J("src",e.defaultAvatar,t.LSH)}}function Ce(n,a){if(1&n&&(t.TgZ(0,"h2")(1,"span"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Oqu(e.profile.username)}}function ye(n,a){if(1&n&&(t.TgZ(0,"h4"),t._uU(1,"Handle: "),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(3),t.Oqu(e.profile.handleName)}}function Ze(n,a){if(1&n&&(t.TgZ(0,"h4"),t._uU(1,"Name: "),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(3),t.Oqu(e.profile.name)}}function Pe(n,a){if(1&n&&(t.TgZ(0,"a",23),t._UZ(1,"img",24),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const e=t.oxw(4);t.Q6J("href",e.socialLink(e.profile.links.twitter,"twitter"),t.LSH),t.xp6(3),t.Oqu(e.profile.links.twitter)}}function ke(n,a){if(1&n&&(t.TgZ(0,"a",23),t._UZ(1,"img",25),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const e=t.oxw(4);t.Q6J("href",e.socialLink(e.profile.links.github,"github"),t.LSH),t.xp6(3),t.Oqu(e.profile.links.github)}}function Ae(n,a){if(1&n&&(t.TgZ(0,"a",23),t._UZ(1,"img",26),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const e=t.oxw(4);t.Q6J("href",e.socialLink(e.profile.links.youtube,"youtube"),t.LSH),t.xp6(3),t.Oqu(e.profile.links.youtube)}}function Ue(n,a){if(1&n&&(t.TgZ(0,"a",23),t._UZ(1,"img",27),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const e=t.oxw(4);t.Q6J("href",e.socialLink(e.profile.links.instagram,"instagram"),t.LSH),t.xp6(3),t.Oqu(e.profile.links.instagram)}}function De(n,a){if(1&n&&(t.TgZ(0,"a",23),t._UZ(1,"img",28),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const e=t.oxw(4);t.Q6J("href",e.socialLink(e.profile.links.facebook,"facebook"),t.LSH),t.xp6(3),t.Oqu(e.profile.links.facebook)}}function Ne(n,a){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,Pe,4,2,"a",22),t.YNc(2,ke,4,2,"a",22),t.YNc(3,Ae,4,2,"a",22),t.YNc(4,Ue,4,2,"a",22),t.YNc(5,De,4,2,"a",22),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.profile.links.twitter),t.xp6(1),t.Q6J("ngIf",e.profile.links.github),t.xp6(1),t.Q6J("ngIf",e.profile.links.youtube),t.xp6(1),t.Q6J("ngIf",e.profile.links.instagram),t.xp6(1),t.Q6J("ngIf",e.profile.links.facebook)}}function Qe(n,a){if(1&n&&(t.TgZ(0,"p",29),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.profile.bio)}}function Me(n,a){if(1&n&&(t.TgZ(0,"div",11),t.YNc(1,Te,1,1,"img",15),t.YNc(2,ve,1,1,"img",15),t.YNc(3,Ce,3,1,"h2",16),t.YNc(4,ye,4,1,"h4",16),t.YNc(5,Ze,4,1,"h4",16),t.TgZ(6,"app-arweave-address",17),t._uU(7,"Address: "),t.qZA(),t.YNc(8,Ne,6,5,"div",18),t.YNc(9,Qe,2,1,"p",19),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.profile.avatarURL),t.xp6(1),t.Q6J("ngIf",!e.profile.avatarURL),t.xp6(1),t.Q6J("ngIf",e.profile.username),t.xp6(1),t.Q6J("ngIf",e.profile.handleName),t.xp6(1),t.Q6J("ngIf",e.profile.name),t.xp6(1),t.Q6J("address",e.address)("showProfileImage",!1)("showHandleInAddress",!1)("isAddress",!0),t.xp6(2),t.Q6J("ngIf",e.profile.links),t.xp6(1),t.Q6J("ngIf",e.profile.bio)}}function Ie(n,a){if(1&n&&(t.TgZ(0,"div",11),t._UZ(1,"img",20),t.TgZ(2,"app-arweave-address",17),t._uU(3,"Address: "),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("src",e.defaultAvatar,t.LSH),t.xp6(1),t.Q6J("address",e.address)("showProfileImage",!1)("showHandleInAddress",!1)("isAddress",!0)}}function Ye(n,a){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,we,2,0,"div",9),t.YNc(2,xe,5,4,"div",10),t.YNc(3,Me,10,11,"div",9),t.YNc(4,Ie,4,5,"div",9),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loadingProfile),t.xp6(1),t.Q6J("ngIf",e.isAdmin&&!e.loadingProfile),t.xp6(1),t.Q6J("ngIf",e.profile&&!e.loadingProfile),t.xp6(1),t.Q6J("ngIf",!e.profile&&!e.loadingProfile&&e.address)}}function Re(n,a){if(1&n&&t._UZ(0,"app-published-pages",37),2&n){const e=t.oxw(2);t.Q6J("address",e.address)("lang",e.routeLang)}}function Le(n,a){if(1&n&&t._UZ(0,"app-posted-updates",37),2&n){const e=t.oxw(2);t.Q6J("address",e.address)("lang",e.routeLang)}}function Je(n,a){if(1&n&&t._UZ(0,"app-donations-made",37),2&n){const e=t.oxw(2);t.Q6J("address",e.address)("lang",e.routeLang)}}function Oe(n,a){if(1&n&&t._UZ(0,"app-donations-received",37),2&n){const e=t.oxw(2);t.Q6J("address",e.address)("lang",e.routeLang)}}function qe(n,a){1&n&&(t.TgZ(0,"div",1)(1,"h2",11),t._uU(2," Activity History "),t.qZA(),t.TgZ(3,"div",30)(4,"mat-tab-group",31)(5,"mat-tab",32),t.YNc(6,Re,1,2,"ng-template",33),t.qZA(),t.TgZ(7,"mat-tab",34),t.YNc(8,Le,1,2,"ng-template",33),t.qZA(),t.TgZ(9,"mat-tab",35),t.YNc(10,Je,1,2,"ng-template",33),t.qZA(),t.TgZ(11,"mat-tab",36),t.YNc(12,Oe,1,2,"ng-template",33),t.qZA()()()())}function Se(n,a){1&n&&(t.TgZ(0,"div",1)(1,"div",38),t._uU(2," Profile not found. "),t.qZA()())}let H=(()=>{class n{constructor(e,i,o,s,r,c,d){this._auth=e,this._route=i,this._snackBar=o,this._location=s,this._arwikiToken=r,this._dialog=c,this._userSettings=d,this.address="",this.currentAddress="",this.profile=null,this.profileSubscription=f.w0.EMPTY,this.defaultAvatar="assets/img/blank-profile.png",this.loadingProfile=!1,this.isAdmin=!1,this.isAdminSubscription=f.w0.EMPTY,this.routeLang=""}ngOnInit(){const e=this._route.snapshot.paramMap.get("address"),i=this._route.snapshot.paramMap.get("lang");this.address="",e&&(this.address=e,this.loadProfile(this.address),this.isAdminCheck(this.address)),i&&(this.routeLang=i),this._route.paramMap.subscribe(o=>{const s=o.get("address"),r=o.get("lang");this.address="",this.routeLang="",s&&(this.address=s,this.loadProfile(this.address),this.isAdminCheck(this.address)),r&&(this.routeLang=r)}),this.currentAddress=this._auth.getMainAddressSnapshot(),this._auth.account$.subscribe(o=>{this.currentAddress=o})}loadProfile(e){this.loadingProfile=!0,this.profileSubscription=this._auth.getProfile(e).subscribe({next:i=>{this.profile=null,i&&(this.profile=i),this.loadingProfile=!1},error:i=>{this.loadingProfile=!1,this.message(i,"error")}})}message(e,i="",o){this._snackBar.open(e,"X",{duration:8e3,horizontalPosition:"center",verticalPosition:o,panelClass:i})}goBack(){this._location.back()}ngOnDestroy(){this.profileSubscription.unsubscribe(),this.isAdminSubscription.unsubscribe()}isAdminCheck(e){this.isAdminSubscription=this._arwikiToken.isAdmin(e).subscribe({next:i=>{this.isAdmin=!1,i&&(this.isAdmin=!0)},error:i=>{this.message(i,"error")}})}socialLink(e,i){let o="";return"twitter"===i?o=`https://twitter.com/${e}`:"youtube"===i?o=`https://youtube.com/${e}`:"github"===i?o=`https://github.com/${e}`:"instagram"===i?o=`https://instagram.com/${e}`:"facebook"===i&&(o=`https://facebook.com/${e}`),o}donate(){let i="LTR"===this._userSettings.getDefaultLang().writing_system?"ltr":"rtl";const o=this._auth.getMainAddressSnapshot();this._dialog.open($.i,{data:{sponsor:this.address,mainAddress:o},direction:i,disableClose:!0}).afterClosed().subscribe(function(){var r=(0,A.Z)(function*(c){});return function(c){return r.apply(this,arguments)}}())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U.e),t.Y36(k.gz),t.Y36(D.ux),t.Y36(Z.Ye),t.Y36(N.d),t.Y36(z.uw),t.Y36(Q.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-detail"]],decls:20,vars:13,consts:[[1,"container","profile-container"],[1,"row","fadeIn"],[1,"page-title","col-12","col-md-9"],[1,"text-right","page-title-buttons","col-12","col-md-3"],["type","button","mat-button","","color","primary",1,"btn-toolbar",3,"click"],[1,"green-money","animate__animated","animate__heartBeat","animate__slow","animate__infinite"],["mat-button","","class","btn-toolbar","color","primary","target","_blank","href","https://account.metaweave.xyz/",4,"ngIf"],["class","row fadeIn",4,"ngIf"],["mat-button","","color","primary","target","_blank","href","https://account.metaweave.xyz/",1,"btn-toolbar"],["class","col-12",4,"ngIf"],["class","col-12 text-right",4,"ngIf"],[1,"col-12"],[1,"spinner-center"],[1,"col-12","text-right"],["mat-flat-button","","color","primary",3,"routerLink"],["class","avatar",3,"src",4,"ngIf"],[4,"ngIf"],[1,"mini-text",3,"address","showProfileImage","showHandleInAddress","isAddress"],["class","row-col-social-media",4,"ngIf"],["class","text-center bio",4,"ngIf"],[1,"avatar",3,"src"],[1,"row-col-social-media"],["mat-button","","color","accent","target","_blank",3,"href",4,"ngIf"],["mat-button","","color","accent","target","_blank",3,"href"],["src","./assets/img/social-media/twitterWhite.png",1,"invert-colors"],["src","./assets/img/social-media/github2.png",1,"invert-colors"],["src","./assets/img/social-media/ytWhite.png",1,"invert-colors"],["src","./assets/img/social-media/instagramWhite.png",1,"invert-colors"],["src","./assets/img/social-media/facebookWhite.png",1,"invert-colors"],[1,"text-center","bio"],[1,"col-12","history"],["color","accent"],["label","Published Pages"],["matTabContent",""],["label","Posted Updates"],["label","Donations made"],["label","Donations received"],[3,"address","lang"],[1,"col"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return i.donate()}),t.TgZ(7,"mat-icon",5),t._uU(8,"volunteer_activism"),t.qZA(),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",4),t.NdJ("click",function(){return i.goBack()}),t.TgZ(12,"mat-icon"),t._uU(13,"navigate_before"),t.qZA(),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.YNc(16,fe,5,3,"a",6),t.qZA()(),t.YNc(17,Ye,5,4,"div",7),t.YNc(18,qe,13,0,"div",7),t.YNc(19,Se,3,0,"div",7),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,7,"PROFILE.TITLE")," "),t.xp6(6),t.hij(" ",t.lcZ(10,9,"GENERAL.BUTTONS.BTN_DONATE")," "),t.xp6(5),t.hij(" ",t.lcZ(15,11,"GENERAL.BUTTONS.GO_BACK")," "),t.xp6(2),t.Q6J("ngIf",i.currentAddress==i.address),t.xp6(1),t.Q6J("ngIf",i.address),t.xp6(1),t.Q6J("ngIf",i.address&&!i.loadingProfile),t.xp6(1),t.Q6J("ngIf",!i.address))},dependencies:[Z.O5,k.yS,v.lW,v.zs,W.Hw,M.Ou,O.SP,O.uX,O.Vc,I.N,ht,Ot,te,_e,he.X$],styles:[".profile-container[_ngcontent-%COMP%]{min-height:600px;margin-top:100px}h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-bottom:6px;margin-top:6px}h1[_ngcontent-%COMP%]{margin-bottom:20px}.avatar[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;object-fit:cover;flex-shrink:0;vertical-align:middle;margin-left:24px;margin-right:24px;float:none;margin-bottom:20px}.page-title[_ngcontent-%COMP%], .page-title-buttons[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.btn-toolbar[_ngcontent-%COMP%]{color:inherit}.row-col-social-media[_ngcontent-%COMP%]{text-align:left}.row-col-social-media[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}.row-col-social-media[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:6px}.row-col-social-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;height:28px}@media (min-width: 600px){.avatar[_ngcontent-%COMP%]{float:left}}.mini-text[_ngcontent-%COMP%]{font-size:12px}.bio[_ngcontent-%COMP%]{clear:both}.history[_ngcontent-%COMP%]{min-height:400px;margin-bottom:40px}"]}),n})();const Be=[{path:"",children:[{path:":address",component:H},{path:"",component:H}]}];let He=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[k.Bz.forChild(Be),k.Bz]}),n})(),Ve=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Z.ez,He,V.m]}),n})()}}]);