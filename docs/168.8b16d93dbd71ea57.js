"use strict";(self.webpackChunkarwiki=self.webpackChunkarwiki||[]).push([[168],{7168:(Kt,E,r)=>{r.r(E),r.d(E,{SearchModule:()=>Gt});var h=r(36895),q=r(37101),_=r(89299),A=r(15861),Q=r(51614),P=r(50727),Y=r(39646),B=r(31783),S=r(63900),w=r(38952),u=r(24006),t=r(94650),H=r(68853),M=r(75501),U=r(17009),j=r(69817),C=r(59549),O=r(44144),Z=r(4859),I=r(97392),D=r(51572),J=r(73162),z=r(65503),N=r(13081);function G(e,o){1&e&&t._UZ(0,"mat-spinner",17)}function F(e,o){1&e&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.RESULTS.NO_RESULTS")," "))}function $(e,o){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,F,3,3,"div",18),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.pages.length)}}function V(e,o){1&e&&t._UZ(0,"mat-progress-bar",23)}function K(e,o){if(1&e&&(t.TgZ(0,"div",20),t.YNc(1,V,1,0,"mat-progress-bar",21),t._UZ(2,"app-article-card",22),t.qZA()),2&e){const n=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",!a.pagesData[n.id]),t.xp6(1),t.Q6J("article",n)("routeLang",a.routeLang)("defaultTheme",a.defaultTheme)("baseURL",a.baseURL)}}const X=function(e){return["/",e,"search","sitemap"]};let W=(()=>{class e{constructor(n,a,i,s,p,m,c){this._arweave=n,this._arwikiTokenContract=a,this._snackBar=i,this._route=s,this._userSettings=p,this._router=m,this._location=c,this.pagesSubscription=P.w0.EMPTY,this.loadingPages=!1,this.query="",this.pages=[],this.routeLang="",this.pagesData={},this.baseURL=this._arweave.baseURL,this.defaultTheme="",this.arverifyProcessedAddressesMap={},this.frmSearch=new u.nJ({searchQry:new u.p4("",[u.kI.required])})}get searchQry(){return this.frmSearch.get("searchQry")}set setSearchQry(n){this.frmSearch.get("searchQry").setValue(n)}ngOnInit(){var n=this;return(0,A.Z)(function*(){n.arwikiQuery=new Q.x(n._arweave.arweave),n._route.paramMap.subscribe(function(){var a=(0,A.Z)(function*(i){n.query=i.get("query"),n.routeLang=i.get("lang"),n.setSearchQry=n.query,yield n.searchNow()});return function(i){return a.apply(this,arguments)}}()),n.getDefaultTheme()})()}searchNow(){var n=this;return(0,A.Z)(function*(){n.loadingPages=!0,n.pages=[];let a,i=0;try{a=yield n._arweave.arweave.network.getInfo(),i=a.height}catch(p){return void n.message(`${p}`,"error")}var p;n.pagesSubscription=n.searchInApprovedTags([n.query],n.routeLang,i,100).subscribe({next:(p=(0,A.Z)(function*(m){n.pages=m,n.pagesData={},n.loadingPages=!1;for(let c of m)n.pagesData[c.id]=yield n._arweave.arweave.transactions.getData(c.id,{decode:!0,string:!0});n.arverifyProcessedAddressesMap={};for(let c of m){if(Object.prototype.hasOwnProperty.call(n.arverifyProcessedAddressesMap,c.owner))continue;const g=yield n.getArverifyVerification(c.owner);n.arverifyProcessedAddressesMap[c.owner]=g}}),function(c){return p.apply(this,arguments)}),error:p=>{n.message(p,"error"),n.loadingPages=!1}})})()}slugToLabel(n){return n.replace(/_/gi," ")}message(n,a="",i){this._snackBar.open(n,"X",{duration:8e3,horizontalPosition:"center",verticalPosition:i,panelClass:a})}ngOnDestroy(){this.pagesSubscription&&this.pagesSubscription.unsubscribe()}getArverifyVerification(n){return(0,A.Z)(function*(){const a=yield(0,B.Ni)(n);return{verified:a.verified,icon:a.icon,percentage:a.percentage}})()}sanitizeMarkdown(n){return`${(n=n.replace(/[#*=\[\]]/gi,"")).substring(0,250)} ...`}sanitizeImg(n){return n.indexOf("http")>=0?n:n?`${this.baseURL}${n}`:""}searchInApprovedTags(n,a,i,s=100){const p=n.map(g=>g.toLowerCase().trim());let m=[],c={};return this._arwikiTokenContract.getAdminList().pipe((0,S.w)(g=>(m=g,this._arwikiTokenContract.getApprovedPages(a))),(0,S.w)(g=>(c=g,this.arwikiQuery.getVerifiedTagsFromQueries(m,p,a,s,i))),(0,S.w)(g=>{const T=[],v=Object.keys(c);for(let d of g){const y=new w.default(d,this._arweave.arweave),f=this.arwikiQuery.searchKeyNameInTags(y.tags,"Arwiki-Page-Slug");if(v.indexOf(f)<0||T.indexOf(c[f].id)>=0)continue;let x=c[f].content;c[f].updates.length&&(x=c[f].updates[c[f].updates.length-1].tx),T.push(x)}return this.arwikiQuery.getTXsData(T)}),(0,S.w)(g=>{const T=[];for(let v of g){const d=new w.default(v,this._arweave.arweave),y=this.arwikiQuery.searchKeyNameInTags(d.tags,"Arwiki-Page-Title"),f=this.arwikiQuery.searchKeyNameInTags(d.tags,"Arwiki-Page-Slug"),x=this.arwikiQuery.searchKeyNameInTags(d.tags,"Arwiki-Page-Category"),Ft=this.arwikiQuery.searchKeyNameInTags(d.tags,"Arwiki-Page-Img");T.push({title:y,slug:f,category:x,img:Ft,owner:d.owner.address,id:d.id})}return(0,Y.of)(T)}))}getDefaultTheme(){this.defaultTheme=this._userSettings.getDefaultTheme(),this._userSettings.defaultThemeStream.subscribe(n=>{this.defaultTheme=n})}onSearch(){const n=this.searchQry.value;!n||this._router.navigate([`${this.routeLang}/search/${n}`])}goBack(){this._location.back()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(H.N),t.Y36(M.d),t.Y36(U.ux),t.Y36(_.gz),t.Y36(j.s),t.Y36(_.F0),t.Y36(h.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:32,vars:22,consts:[[1,"container","search-page-container","fadeIn"],[1,"row"],[1,"page-title","col-12","col-md-9"],[1,"text-right","page-title-buttons","col-12","col-md-3"],["type","button","mat-button","","color","primary",1,"btn-back",3,"click"],[1,"row",3,"formGroup","ngSubmit"],["appearance","fill",1,"col-12","col-md-10","text-center"],["matInput","","formControlName","searchQry","matInput","","autocomplete","off","placeholder",""],[1,"col-12","col-md-2","text-right"],["color","primary","mat-flat-button","",1,"btn-search"],["aria-hidden","false","aria-label","Search","fontIcon","search"],[1,"col-12","text-right"],["mat-button","",1,"btn-sitemap",3,"routerLink"],[1,"col-12"],["class","spinner-center",4,"ngIf"],[4,"ngIf"],["class","col-12 col-md-6 card-page fadeIn",4,"ngFor","ngForOf"],[1,"spinner-center"],["class","text-left",4,"ngIf"],[1,"text-left"],[1,"col-12","col-md-6","card-page","fadeIn"],["mode","indeterminate","class","fadeIn",4,"ngIf"],[3,"article","routeLang","defaultTheme","baseURL"],["mode","indeterminate",1,"fadeIn"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return a.goBack()}),t.TgZ(7,"mat-icon"),t._uU(8,"navigate_before"),t.qZA(),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"form",5),t.NdJ("ngSubmit",function(){return a.onSearch()}),t.TgZ(12,"mat-form-field",6)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",7),t.qZA(),t.TgZ(17,"div",8)(18,"button",9),t._UZ(19,"mat-icon",10),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",11)(23,"a",12),t._uU(24),t.ALo(25,"translate"),t.qZA()()(),t.TgZ(26,"div",1)(27,"div",13),t.YNc(28,G,1,0,"mat-spinner",14),t.YNc(29,$,2,1,"div",15),t.qZA()(),t.TgZ(30,"div",1),t.YNc(31,K,3,5,"div",16),t.qZA()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,10,"SEARCH.RESULTS.TITLE")," "),t.xp6(6),t.hij(" ",t.lcZ(10,12,"GENERAL.BUTTONS.GO_BACK")," "),t.xp6(2),t.Q6J("formGroup",a.frmSearch),t.xp6(3),t.Oqu(t.lcZ(15,14,"SEARCH.RESULTS.SEARCH_LABEL")),t.xp6(6),t.hij(" ",t.lcZ(21,16,"SEARCH.RESULTS.SEARCH_BTN")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(20,X,a.routeLang)),t.xp6(1),t.Oqu(t.lcZ(25,18,"SEARCH.RESULTS.SITEMAP")),t.xp6(4),t.Q6J("ngIf",a.loadingPages),t.xp6(1),t.Q6J("ngIf",!a.loadingPages),t.xp6(2),t.Q6J("ngForOf",a.pages))},dependencies:[h.sg,h.O5,_.yS,C.KE,C.hX,O.Nt,Z.lW,Z.zs,I.Hw,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,D.Ou,J.pW,z.y,N.X$],styles:[".search-page-container[_ngcontent-%COMP%]{min-height:600px;margin-top:100px}.search-page-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:40px}.card-title[_ngcontent-%COMP%]{font-size:2.5rem;font-family:Roboto Mono,monospace;cursor:pointer}.card-page[_ngcontent-%COMP%], .card-preview[_ngcontent-%COMP%]{margin-bottom:20px}.mini-text[_ngcontent-%COMP%]{font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.btn-search[_ngcontent-%COMP%]{width:100%;line-height:58px}.btn-sitemap[_ngcontent-%COMP%]{font-size:12px;margin-bottom:20px}.btn-back[_ngcontent-%COMP%]{color:inherit}.page-title-buttons[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}"]}),e})();var l=r(30671),tt=r(12687),et=r(97134),nt=r(98739),b=r(96308);const at=["sortPages"],ot=["sortLangs"],it=["pagesPaginator"],rt=["langsPaginator"];function st(e,o){1&e&&(t.TgZ(0,"span",43),t._uU(1,"Active"),t.qZA())}function ct(e,o){1&e&&(t.TgZ(0,"span",44),t._uU(1,"Inactive"),t.qZA())}const R=function(e,o){return["/",e,"category",o]};function lt(e,o){if(1&e&&(t.TgZ(0,"li")(1,"div",38)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,st,2,0,"span",39),t.YNc(6,ct,2,0,"span",40),t.qZA(),t.TgZ(7,"div",41)(8,"strong"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._uU(11),t.TgZ(12,"strong"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"a",42),t._uU(16),t.qZA(),t.TgZ(17,"strong"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._uU(20),t.qZA()()),2&e){const n=o.$implicit,a=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,10,"MAIN_MENU."+n.slug)," "),t.xp6(2),t.Q6J("ngIf",n.active),t.xp6(1),t.Q6J("ngIf",!n.active),t.xp6(3),t.hij("",t.lcZ(10,12,"SEARCH.SITEMAP.LABEL_ORDER")," "),t.xp6(2),t.hij("",n.order," "),t.xp6(2),t.hij("",t.lcZ(14,14,"SEARCH.SITEMAP.LABEL_SLUG")," "),t.xp6(2),t.Q6J("routerLink",t.WLB(18,R,a.routeLang,n.slug)),t.xp6(1),t.hij(" ",n.slug," "),t.xp6(2),t.hij("",t.lcZ(19,16,"SEARCH.SITEMAP.LABEL_PAGES")," "),t.xp6(2),t.hij("",a.numPagesByCategory[n.slug]||"0"," ")}}function pt(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_SLUG")," "))}const gt=function(e,o){return["/",e,o]};function ut(e,o){if(1&e&&(t.TgZ(0,"td",46)(1,"a",47),t._uU(2),t.qZA()()),2&e){const n=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("routerLink",t.WLB(2,gt,a.routeLang,n.slug)),t.xp6(1),t.Oqu(n.slug)}}function mt(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_CATEGORY")," "))}function dt(e,o){if(1&e&&(t.TgZ(0,"td",46)(1,"a",48),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&e){const n=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("routerLink",t.WLB(4,R,a.routeLang,n.category)),t.xp6(1),t.hij(" ",t.lcZ(3,2,"MAIN_MENU."+n.category)," ")}}function ft(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_SPONSOR")," "))}function ht(e,o){if(1&e&&(t.TgZ(0,"td",49),t._UZ(1,"app-arweave-address",50),t.qZA()),2&e){const n=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("address",n.sponsor)("lang",a.routeLang)("showHandleInAddress",!1)}}function _t(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_ACCEPTED_AT"),""))}function At(e,o){if(1&e&&(t.TgZ(0,"td",49)(1,"a",51),t._uU(2),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.MGl("href","https://viewblock.io/arweave/block/",n.start,"",t.LSH),t.xp6(1),t.hij(" ",n.start," ")}}function Tt(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_VALUE"),""))}function St(e,o){if(1&e&&(t.TgZ(0,"td",49),t._uU(1),t.TgZ(2,"span",52),t._uU(3,"$WIKI"),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.value," ")}}function Ct(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_STATUS")," "))}function Zt(e,o){1&e&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.LABEL_ACTIVE")," "))}function xt(e,o){1&e&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.LABEL_INACTIVE")," "))}function Lt(e,o){if(1&e&&(t.TgZ(0,"td",49),t.YNc(1,Zt,3,3,"span",39),t.YNc(2,xt,3,3,"span",40),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("ngIf",n.active),t.xp6(1),t.Q6J("ngIf",!n.active)}}function vt(e,o){1&e&&t._UZ(0,"tr",53)}function yt(e,o){1&e&&t._UZ(0,"tr",54)}function Et(e,o){if(1&e&&(t.TgZ(0,"tr",55)(1,"td",56),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&e){t.oxw();const n=t.MAs(34);t.xp6(2),t.AsE("",t.lcZ(3,2,"SEARCH.SITEMAP.LABEL_NO_MATCH"),' "',n.value,'"')}}function Pt(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_CODE")," "))}const L=function(e){return["/",e]};function wt(e,o){if(1&e&&(t.TgZ(0,"td",46)(1,"a",47),t._uU(2),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,L,n.code)),t.xp6(1),t.Oqu(n.code)}}function Mt(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_ISO_NAME")," "))}function Ut(e,o){if(1&e&&(t.TgZ(0,"td",46)(1,"a",47),t._uU(2),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,L,n.code)),t.xp6(1),t.Oqu(n.iso_name)}}function Ot(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_NATIVE_NAME")," "))}function It(e,o){if(1&e&&(t.TgZ(0,"td",46)(1,"a",47),t._uU(2),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,L,n.code)),t.xp6(1),t.Oqu(n.native_name)}}function Nt(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_WRITING_SYS")," "))}function bt(e,o){if(1&e&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.writing_system," ")}}function Rt(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_PAGES")," "))}function kt(e,o){if(1&e&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&e){const n=o.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.numLangsByCode[n.code]," ")}}function qt(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.COLUMN_STATUS")," "))}function Qt(e,o){1&e&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.LABEL_ACTIVE")," "))}function Yt(e,o){1&e&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SEARCH.SITEMAP.LABEL_INACTIVE")," "))}function Bt(e,o){if(1&e&&(t.TgZ(0,"td",46),t.YNc(1,Qt,3,3,"span",39),t.YNc(2,Yt,3,3,"span",40),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("ngIf",n.active),t.xp6(1),t.Q6J("ngIf",!n.active)}}function Ht(e,o){1&e&&t._UZ(0,"tr",53)}function jt(e,o){1&e&&t._UZ(0,"tr",54)}function Dt(e,o){if(1&e&&(t.TgZ(0,"tr",55)(1,"td",56),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&e){t.oxw();const n=t.MAs(34);t.xp6(2),t.AsE("",t.lcZ(3,2,"SEARCH.SITEMAP.LABEL_NO_MATCH"),' "',n.value,'"')}}const k=function(){return[5,10,25,100]},Jt=[{path:"",children:[{path:"sitemap",component:(()=>{class e{constructor(n,a,i,s,p){this._arwikiToken=n,this._route=a,this._snackBar=i,this._liveAnnouncer=s,this._location=p,this.categories=[],this.routeLang="",this.pagesSubscription=P.w0.EMPTY,this.loading=!1,this.displayedColumns=["slug","category","sponsor","start","value","active"],this.numPagesByCategory={},this.displayedColumnsLangs=["code","iso_name","native_name","writing_system","total","active"],this.numLangsByCode={}}ngOnInit(){var n=this;this.loading=!0,this.routeLang=this._route.snapshot.paramMap.get("lang"),this._route.paramMap.subscribe(function(){var a=(0,A.Z)(function*(i){n.routeLang=i.get("lang")});return function(i){return a.apply(this,arguments)}}()),this.initTableAllPages(),this.initCategories(),this.initLanguages()}initTableAllPages(){const n=this._arwikiToken.getAllPagesFromLocalState(this.routeLang),a=Object.values(n);a.sort((i,s)=>i.category.localeCompare(s.category)||i.slug.localeCompare(s.slug)),this.dataSource=new l.by(a),a.forEach(i=>{Object.prototype.hasOwnProperty.call(this.numPagesByCategory,i.category)?this.numPagesByCategory[i.category]++:this.numPagesByCategory[i.category]=1})}initCategories(){const n=this._arwikiToken.getCategoriesFromLocal(),a=Object.values(n);a.sort((i,s)=>i.order-s.order),this.categories=a}initLanguages(){const n=this._arwikiToken.getLanguagesFromLocal(),a=Object.values(n);a.sort((i,s)=>i.code.localeCompare(s.code)),this.dataSourceLangs=new l.by(a),a.forEach(i=>{const s=this._arwikiToken.getAllPagesFromLocalState(i.code),p=Object.keys(s).length;this.numLangsByCode[i.code]=p||0})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSourceLangs.paginator=this.langsPaginator,this.dataSourceLangs.sort=this.sortLangs}ngOnDestroy(){}message(n,a="",i){this._snackBar.open(n,"X",{duration:8e3,horizontalPosition:"center",verticalPosition:i,panelClass:a})}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}totalPages(){return Object.values(this.numPagesByCategory).reduce((n,a)=>n+a)}timestampToDate(n){return new Date(1e3*n)}applyFilterLang(n){this.dataSourceLangs.filter=n.target.value.trim().toLowerCase(),this.dataSourceLangs.paginator&&this.dataSourceLangs.paginator.firstPage()}goBack(){this._location.back()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(M.d),t.Y36(_.gz),t.Y36(U.ux),t.Y36(tt.Kd),t.Y36(h.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sitemap"]],viewQuery:function(n,a){if(1&n&&(t.Gf(at,5),t.Gf(ot,5),t.Gf(it,5),t.Gf(rt,5),t.Gf(l.BZ,5)),2&n){let i;t.iGM(i=t.CRH())&&(a.sort=i.first),t.iGM(i=t.CRH())&&(a.sortLangs=i.first),t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.langsPaginator=i.first),t.iGM(i=t.CRH())&&(a.table=i.first)}},decls:98,vars:38,consts:[[1,"container","sitemap","fadeIn"],[1,"row"],[1,"page-title","col-12","col-md-9"],[1,"text-right","page-title-buttons","col-12","col-md-3"],["type","button","mat-button","","color","primary",1,"btn-back",3,"click"],[1,"col"],[1,"categories-list"],[4,"ngFor","ngForOf"],[1,"total-pages"],["appearance","standard"],["matInput","","placeholder","Ex. Arweave","autocomplete","off",3,"keyup"],["input",""],[1,"mat-elevation-z8","table-container"],["mat-table","","matSort","",3,"dataSource"],["sortPages","matSort"],["matColumnDef","slug"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","sponsor"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","start"],["matColumnDef","value"],["matColumnDef","active"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page size",3,"pageSize","pageSizeOptions"],["pagesPaginator","matPaginator"],[1,"row","row-lang"],["matInput","","placeholder","Ex. English","autocomplete","off",3,"keyup"],["sortLangs","matSort"],["matColumnDef","code"],["matColumnDef","iso_name"],["matColumnDef","native_name"],["matColumnDef","writing_system"],["matColumnDef","total"],["langsPaginator","matPaginator"],[1,"cat-title"],["class","active-label",4,"ngIf"],["class","inactive-label",4,"ngIf"],[1,"secondary-txt"],["mat-button","",1,"cat-slug",3,"routerLink"],[1,"active-label"],[1,"inactive-label"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-button","",1,"btn-ellipsis",3,"routerLink"],["mat-button","",3,"routerLink"],["mat-cell","",1,"text-center"],[3,"address","lang","showHandleInAddress"],["mat-button","","target","_blank",3,"href"],[1,"wiki"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return a.goBack()}),t.TgZ(7,"mat-icon"),t._uU(8,"navigate_before"),t.qZA(),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",1)(15,"div",5)(16,"ul",6),t.YNc(17,lt,21,21,"li",7),t.qZA()()(),t.TgZ(18,"div",8)(19,"strong"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"span"),t._uU(23),t.qZA()(),t.TgZ(24,"h2"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"div",1)(28,"div",5)(29,"mat-form-field",9)(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"input",10,11),t.NdJ("keyup",function(s){return a.applyFilter(s)}),t.qZA()(),t.TgZ(35,"div",12)(36,"table",13,14),t.ynx(38,15),t.YNc(39,pt,3,3,"th",16),t.YNc(40,ut,3,5,"td",17),t.BQk(),t.ynx(41,18),t.YNc(42,mt,3,3,"th",16),t.YNc(43,dt,4,7,"td",17),t.BQk(),t.ynx(44,19),t.YNc(45,ft,3,3,"th",16),t.YNc(46,ht,2,3,"td",20),t.BQk(),t.ynx(47,21),t.YNc(48,_t,3,3,"th",16),t.YNc(49,At,3,2,"td",20),t.BQk(),t.ynx(50,22),t.YNc(51,Tt,3,3,"th",16),t.YNc(52,St,4,1,"td",20),t.BQk(),t.ynx(53,23),t.YNc(54,Ct,3,3,"th",16),t.YNc(55,Lt,3,2,"td",20),t.BQk(),t.YNc(56,vt,1,0,"tr",24),t.YNc(57,yt,1,0,"tr",25),t.YNc(58,Et,4,4,"tr",26),t.qZA(),t._UZ(59,"mat-paginator",27,28),t.qZA()()(),t.TgZ(61,"h2"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",29)(65,"div",5)(66,"mat-form-field",9)(67,"mat-label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"input",30,11),t.NdJ("keyup",function(s){return a.applyFilterLang(s)}),t.qZA()(),t.TgZ(72,"div",12)(73,"table",13,31),t.ynx(75,32),t.YNc(76,Pt,3,3,"th",16),t.YNc(77,wt,3,4,"td",17),t.BQk(),t.ynx(78,33),t.YNc(79,Mt,3,3,"th",16),t.YNc(80,Ut,3,4,"td",17),t.BQk(),t.ynx(81,34),t.YNc(82,Ot,3,3,"th",16),t.YNc(83,It,3,4,"td",17),t.BQk(),t.ynx(84,35),t.YNc(85,Nt,3,3,"th",16),t.YNc(86,bt,2,1,"td",17),t.BQk(),t.ynx(87,36),t.YNc(88,Rt,3,3,"th",16),t.YNc(89,kt,2,1,"td",17),t.BQk(),t.ynx(90,23),t.YNc(91,qt,3,3,"th",16),t.YNc(92,Bt,3,2,"td",17),t.BQk(),t.YNc(93,Ht,1,0,"tr",24),t.YNc(94,jt,1,0,"tr",25),t.YNc(95,Dt,4,4,"tr",26),t.qZA(),t._UZ(96,"mat-paginator",27,37),t.qZA()()()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,20,"SEARCH.SITEMAP.TITLE")," "),t.xp6(6),t.hij(" ",t.lcZ(10,22,"GENERAL.BUTTONS.GO_BACK")," "),t.xp6(3),t.hij(" ",t.lcZ(13,24,"SEARCH.SITEMAP.TITLE_CATEGORIES")," "),t.xp6(5),t.Q6J("ngForOf",a.categories),t.xp6(3),t.hij("",t.lcZ(21,26,"SEARCH.SITEMAP.LABEL_TOTAL_PAGES")," "),t.xp6(3),t.Oqu(a.totalPages()),t.xp6(2),t.Oqu(t.lcZ(26,28,"SEARCH.SITEMAP.TITLE_PAGES")),t.xp6(6),t.Oqu(t.lcZ(32,30,"SEARCH.SITEMAP.LABEL_FILTER")),t.xp6(5),t.Q6J("dataSource",a.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(36,k)),t.xp6(3),t.Oqu(t.lcZ(63,32,"SEARCH.SITEMAP.TITLE_OTHER_LANGS")),t.xp6(6),t.Oqu(t.lcZ(69,34,"SEARCH.SITEMAP.LABEL_FILTER")),t.xp6(5),t.Q6J("dataSource",a.dataSourceLangs),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumnsLangs),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumnsLangs),t.xp6(2),t.Q6J("pageSize",5)("pageSizeOptions",t.DdM(37,k)))},dependencies:[h.sg,h.O5,_.yS,C.KE,C.hX,O.Nt,Z.lW,Z.zs,I.Hw,et.N,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,nt.NW,b.YE,b.nU,N.X$],styles:[".container.sitemap[_ngcontent-%COMP%]{padding-top:90px}.table-container[_ngcontent-%COMP%]{overflow:auto}table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}h2[_ngcontent-%COMP%]{margin-top:26px;margin-bottom:26px}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.active-label[_ngcontent-%COMP%]{padding:4px;background-color:#49af41;color:#fff;font-size:10px;border-radius:6px}.inactive-label[_ngcontent-%COMP%]{padding:4px;background-color:#e20000;color:#fff;font-size:10px;border-radius:6px}.btn-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:260px;margin:0 auto}.categories-list[_ngcontent-%COMP%]{padding-left:22px;list-style:none;margin-top:0}.secondary-txt[_ngcontent-%COMP%]{font-size:12px}.cat-title[_ngcontent-%COMP%]{font-size:22px}.total-pages[_ngcontent-%COMP%]{font-size:14px;padding-left:22px}.row-lang[_ngcontent-%COMP%]{margin-bottom:40px}.cat-slug[_ngcontent-%COMP%]{padding-left:4px;padding-right:4px}.wiki[_ngcontent-%COMP%]{font-size:12px}.btn-sitemap[_ngcontent-%COMP%]{font-size:12px;margin-bottom:20px}.btn-back[_ngcontent-%COMP%]{color:inherit}.page-title-buttons[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}"]}),e})()},{path:":query",component:W},{path:"",redirectTo:"sitemap",pathMatch:"full"}]}];let zt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(Jt),_.Bz]}),e})(),Gt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.ez,zt,q.m]}),e})()}}]);